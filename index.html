<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covid Vaccine Registry</title>
    <!-- <link rel="stylesheet" href="index.css"> -->
</head>
<body style="text-align: center;">

    <h1>Covid Vaccination Portal</h1>
    <form name="form" id="myform">
        <label for="name"><b>Name</b></label><span style="color: red !important; display: inline; float: none;">*</span>
        <input type="text" id="name" name="Name" placeholder="Enter Your Name" required><br><br><br>

        <label for="age"><b>Age</b></label>
        <input type="number" id="age" name="Age" placeholder="Enter Your Age"><br><br><br>

        <label for="address"><b>Address</b></label><br>
        <textarea id="address" name="Address" placeholder="Enter Your Address"></textarea><br><br><br>

        <label for="gender"><b>Gender</b></label><br>
        <input type="radio" id="male" name="gender" value="male">
        <label for="male">Male</label>
        <input type="radio" id="female" name="gender" value="female">
        <label for="female">Female</label>
        <input type="radio" id="others" name="gender" value="others">
        <label for="others">Others</label><br><br><br>

        <label for="phone"><b>Phone Number</b></label><span style="color: red !important; display: inline; float: none;">*</span>
        <input type="tel" id="phone" name="PhoneNumber" placeholder="Enter Your Phone Number" required><br><br><br>

        <label for="idProof"><b>ID Proof</b></label>&nbsp;
        <select name="idProof" id="idProof">
            <option value="anything">Select</option>
            <option value="aadhar">Aadhar</option>
            <option value="driving">Driving License</option>
            <option value="pan">Pan Card</option>
        </select><br><br>

        <input type="file" id="myfile" name="filename">
        <br><br><br>&nbsp;

        <input type="checkbox" id="detailsCheckbox" required>
        <label for="detailsCheckbox"><b>I accept all the terms and conditions.</b></label><span style="color: red !important; display: inline; float: none;">*</span><br><br>
    
    <input type="submit" id="submit" value="Submit">
    <input type="button" id="view" onclick="func()" value="View">
  </form>
    <!-- <script>
        const requiredFields = [
            document.getElementById('name'),
            document.getElementById('phone'),
            document.getElementById('detailsCheckbox')
        ];

        const selfDeclarationCheckbox = document.getElementById('detailsCheckbox');
        const submit = document.getElementById('submit');

        // requiredFields.forEach(field => {
        //     field.addEventListener('input', () => {
        //         const allFieldsFilled = requiredFields.every(field => field.value.trim() !== '');
        //         selfDeclarationCheckbox.disabled = !allFieldsFilled;
        //         submit.disabled = !allFieldsFilled;
        //     });
        // });

        const phoneField = document.getElementById('phone');
        phoneField.addEventListener('input', () => {
            phoneField.value = phoneField.value.replace(/[^0-9]/g, '');
        });

        const form = document.getElementById('myform');
        form.addEventListener("submit", function (event) {
            event.preventDefault();
            let formData = new FormData(this);
            let object = {};
            formData.forEach((value, key) => {
                object[key] = value;
            });
            let json = JSON.stringify(object);
            console.log(json);
        }, false);

        function func() {
            alert("Your form has been submitted successfully.");
            document.getElementById("myform");
        }
    </script> -->
<script>
        
let userID;
// document.addEventListener("DOMContentLoaded", function() {
//     const form = document.querySelector("form");
  
//     form.addEventListener("submit", function(event) {
//       event.preventDefault(); 
  
//       const formData = new FormData(form);
//       const formDataObject = {};
//       formData.forEach((value, key) => {
//         formDataObject[key] = value;
//       });
//       fetch("http://localhost:3000/submit", {
//         method: "POST",
//         headers: {
//           "Content-Type": "application/json"
//         },
//         body: JSON.stringify(formDataObject)
//       })
//         .then(response => response.json())
//         .then(data => {
//           console.log("Response Data:", data);
//           textContent=JSON.stringify(data,null,2)
//           userID = data.id
//         })
//         .catch(error => {
//           console.error("Error:", error);
//         });
//     });
//     document.addEventListener("DOMContentLoaded", function() {
//   // ... Your form submission code ...

//   // Add a button or trigger to initiate the GET request
//   const getDataButton = document.getElementById("get-data-button"); // Replace with the actual ID of your button
//   getDataButton.addEventListener("click", function() {
//     // Make a GET request
//     fetch("http://localhost:3000/getData", {
//       method: "GET",
//       headers: {
//         "Content-Type": "application/json"
//       }
//     })
//       .then(response => response.json())
//       .then(data => {
//         console.log("GET Response Data:", data);
//         // Process and use the data as needed
//       })
//       .catch(error => {
//         console.error("Error:", error);
//       });
//   });
// });

//   });
document.addEventListener("DOMContentLoaded", function() {
  const form = document.querySelector("form");

  form.addEventListener("submit", function(event) {
    event.preventDefault();

    const formData = new FormData(form);
    const formDataObject = {};
    formData.forEach((value, key) => {
      formDataObject[key] = value;
    });
    fetch("http://localhost:3000/submit", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(formDataObject)
    })
      .then(response => response.json())
      .then(data => {
        console.log("Response Data:", data);
      })
      .catch(error => {
        console.error("Error:", error);
      });
  });
});

function func() {
  fetch("http://localhost:3000/getData", {
    method: "GET",
    headers: {
      "Content-Type": "application/json"
    }
  })
    .then(response => response.json())
    .then(data => {
      console.log("GET Response Data:", data);
    })
    .catch(error => {
      console.error("Error:", error);
    });
}


</script>
</body>
</html>
